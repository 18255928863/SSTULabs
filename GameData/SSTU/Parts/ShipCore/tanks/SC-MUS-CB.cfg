PART
{
module = Part
name = SSTU-SC-TANK-MUS-CB
author = Shadowmage

TechRequired = fuelSystems
entryCost = 16000
cost = 20000
category = FuelTank
subcategory = 0
title = SSTU - SC-TANK - MUS-CB - Upper Stage (Common-Bulkhead)
manufacturer = SSTU
description = SSTU - ShipCore: Tanks - Upper Stage (Common-Bulkhead). A common-bulkhead modular and configurable upper stage.  Can be configured to any diameter, with additional control for the height of the tank section.  Includes RCS functionality, and selectable mount options.  Also includes automatically generated and sized fairings, with additional control options for top and bottom diameter.
tags = tank, fuel, ?lfo, ?lf, lh2, hydrolox, kerolox, cryo, resource, storage, bulkhead, upper, second

MODEL
{
	model = SSTU/Assets/EmptyProxyModel
}
rescaleFactor = 1

// nodes/attachment 
// node position specification: posX,posY,posZ,axisX,axisY,axisZ,size
// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
node_stack_top = 0,1,0,0,1,0,2
node_stack_top2 = 0,1,0,0,1,0,2
node_stack_bottom = 0,-1,0,0,-1,0,2
node_stack_interstage = 0,-1,0,0,-1,0,2
attachRules = 1,0,1,1,0

//default place-holder value for mass
mass = 0.01
crashTolerance = 6
maxTemp = 2000
fuelCrossFeed = True
breakingForce = 200
breakingTorque = 200
vesselType = Ship
MODULE
{
	name = SSTUCustomUpperStage
	defaultDiameter = 2.5
	defaultTankHeight = 1
	defaultMount = Mount-S-IVB
	defaultRcsThrust = 1
	defaultFuelType = LFO
	minTankHeight = 0.5
	maxTankHeight = 5
	tankHeightIncrement = 0.5
	minTankDiameter = 0.625
	maxTankDiameter = 10
	tankDiameterIncrement = 0.625
	splitTank = false
	useRF = false
	techLimitSet = Default
	FUELTYPE
	{
		name = LFO
	}
	FUELTYPE
	{
		name = LF
	}	
	FUELTYPE
	{
		name = MP
	}
	FUELTYPE
	{
		name = Hydrolox
	}
	FUELTYPE
	{
		name = LiquidHydrogen
	}
	FUELTYPE
	{
		name = Hypergolic
	}
	TANKUPPER
	{
		name = MUS-CB-Upper
	}
	TANKUPPERTOPCAP
	{
		name = MUS-Upper-TopCap
	}
	TANKUPPERBOTTOMCAP
	{
		name = MUS-Upper-BottomCap
	}
	RCS
	{
		name = MUS-RCS1
		modelHorizontalZOffset = 0.0
		modelHorizontalXOffset = 0.0
		modelVerticalOffset = 0
	}
	
	//mounts follow the same basic definition pattern as in the engine clusters
	MOUNT
	{
		name = Mount-S-IVB
	}
	MOUNT
	{
		name = Mount-S-II
	}
	MOUNT
	{
		name = Mount-Generic
	}
	MOUNT
	{
		name = Mount-Skeletal-S
	}
	MOUNT
	{
		name = Mount-Skeletal-M
	}
	MOUNT
	{
		name = Mount-Skeletal-L
	}
	MOUNT
	{
		name = Mount-Nova
	}
}
MODULE
{
	name = ModuleRCS
	thrusterTransformName = SC-GEN-RCS-4F-T-ThrustTransform-XZ
	thrusterPower = 1
	resourceName = MonoPropellant
	resourceFlowMode = STAGE_PRIORITY_FLOW
	fxPrefix = first
	enableRoll = true
	enableYaw = true
	enablePitch = true
	enableX = true
	enableY = true
	enableZ = false
	atmosphereCurve
 	{
		key = 0 260
		key = 1 100
 	}
}
MODULE
{
	name = ModuleRCS
	thrusterTransformName = SC-GEN-RCS-4F-T-ThrustTransform-Y
	thrusterPower = 1
	resourceName = MonoPropellant
	resourceFlowMode = STAGE_PRIORITY_FLOW
	fxPrefix = second
	enableRoll = false
	enableYaw = false
	enablePitch = false
	enableX = false
	enableY = false
	enableZ = true
	atmosphereCurve
 	{
		key = 0 260
		key = 1 100
 	}
}
MODULE
{
	name = ModuleCommand
	minimumCrew = 0
	RESOURCE
	{
		name = ElectricCharge
		rate = 0.0275
	}
}
MODULE
{
	name = ModuleSAS
	SASServiceLevel = 3
}
MODULE
{
	name = ModuleResourceConverter
	ConverterName = Fuel Cell
	StartActionName = Start Fuel Cell
	StopActionName = Stop Fuel Cell
	FillAmount = 0.95
	AutoShutdown = false
	GeneratesHeat = false
	UseSpecialistBonus = false

	INPUT_RESOURCE
	{
		ResourceName = MonoPropellant
		Ratio = 0.001875
		FlowMode = STAGE_PRIORITY_FLOW
	}
	OUTPUT_RESOURCE
	{
		ResourceName = ElectricCharge
		Ratio = 1.5
		DumpExcess = false
	}
}
MODULE
{
	name = SSTUNodeFairing
	diffuseTextureName = SSTU/Assets/SC-GEN-Fairing-DIFF
	nodeName = top
	snapToNode = false
	snapToSecondNode = false
	canManuallyJettison = false
	canAutoJettison = false
	canAdjustSections = true
	canAdjustBottom = false
	canAdjustTop = true	
	FAIRING
	{
		canAdjustBottom = true
		canAdjustTop = true
	}
	
	currentTextureSet = Fairings-White
	TEXTURESET
	{
		name = Fairings-White
	}
}
MODULE
{
	name = SSTUNodeFairing
	diffuseTextureName = SSTU/Assets/SC-GEN-Fairing-DIFF
	nodeName = bottom
	snapToNode = true
	snapToSecondNode = true
	canManuallyJettison = true
	canAdjustSections = true
	canAdjustBottom = true
	canAdjustTop = false
	FAIRING
	{
		canAdjustBottom = true
		canAdjustTop = true
	}
	
	currentTextureSet = Fairings-White
	TEXTURESET
	{
		name = Fairings-White
	}
}
MODULE
{
	name = SSTUSelectableNodes
	nodeName = interstage
	startsEnabled = false
}
}